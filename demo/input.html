<html>
<head>
  <title></title>
  <script src="/polymer/platform/platform.js"></script>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script>
    $(function() {
      var searchActor = function(name) {
        if(!name){
          console.error('No name given');
          return
        }
        query = [
          {
            'name': null,
            'type': '/film/film',
            'only:starring': [{'actor': {'name':name}}],
            'starring': [{actor: {}}],
            'initial_release_date': null,
            'sort': '-initial_release_date'
          }
        ];

        service_url = 'https://www.googleapis.com/freebase/v1/mqlread';
        url = service_url  + '?query=' + encodeURIComponent(JSON.stringify(query));

        $.getJSON(url, function(response) {
          var template = document.getElementById('movie');
          console.log(response.result)
          template.model = response
        });
      }

      searchActor($('#actor').val());
    })
  </script>
</head>
<body>
  <h1>Movies</h1>
  <input name="actor" id="actor" value="Heath Ledger">
  <ul>
  <template id="movie" repeat="{{result}}">
    <li><h2>{{name}} ({{initial_release_date}})</h2></p>
      <ul>
        <template repeat="{{starring}}" if="{{starring}}">
          <li><template bind="{{actor}}">{{name}}</template></li>
        </template>
      </ul>
    </li>
  </template>
  </ul>
</body>
</html>